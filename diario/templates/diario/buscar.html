{% extends 'diario/base.html' %}

{% block title %}Buscar{% endblock %}

{% block content %}
<h1>Buscar entradas</h1>

<form method="GET">
    <p>
        <label>Buscar:</label><br>
        {{ form.buscar }}
        <button type="submit">Buscar</button>
    </p>
</form>

<hr>

{% if request.GET.buscar %}
    <h2>Resultados para: "{{ request.GET.buscar }}"</h2>
    
    {% if resultados %}
        <p>Se encontraron {{ resultados|length }} entrada(s)</p>
        
        <table>
            <tr>
                <th>Título</th>
                <th>Emoción</th>
                <th>Fecha</th>
            </tr>
            {% for entrada in resultados %}
            <tr>
                <td>{{ entrada.titulo }}</td>
                <td>{{ entrada.emocion.nombre }}</td>
                <td>{{ entrada.fecha_creacion|date:"d/m/Y" }}</td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No se encontraron resultados.</p>
    {% endif %}
{% endif %}
{% endblock %}